# Requirements pour OCR Quality Audit - Optimiseur de Pipeline d'Image
# Installation : pip install -r requirements.txt
#
# IMPORTANT: Sur Ubuntu avec CUDA, utilisez requirements_ubuntu.txt

# ===================================================================
# CORE DEPENDENCIES - Optimiseur Principal
# ===================================================================

# Traitement d'image
# ATTENTION: N'installez PAS opencv-python sur Ubuntu CUDA!
# opencv-python>=4.8.0     # Windows/macOS uniquement
# Ubuntu: OpenCV 4.8.0 doit être compilé avec CUDA 11.8
numpy==1.26.4              # Version compatible avec OpenCV CUDA compilé

# OCR
pytesseract==0.3.13        # Wrapper Python pour Tesseract-OCR
# Note: Tesseract-OCR doit être installé séparément
# Windows: https://github.com/UB-Mannheim/tesseract/wiki
# Linux: apt-get install tesseract-ocr tesseract-ocr-fra
# macOS: brew install tesseract

# Image processing
pillow==12.0.0             # PIL pour manipulation d'images

# Optimisation
optuna==4.6.0              # Framework d'optimisation Bayésienne
scipy==1.11.3              # Algorithmes d'optimisation (L-BFGS-B, Nelder-Mead, Sobol)

# ===================================================================
# ANALYSIS DEPENDENCIES - Script d'analyse (analyze_screening.py)
# ===================================================================

# Analyse de données
pandas==2.1.1              # Manipulation de données tabulaires
matplotlib==3.8.0          # Visualisations
seaborn==0.12.0            # Visualisations statistiques avancées

# ===================================================================
# PHASE 3B - Tesseract Batch Processing
# ===================================================================

tifffile>=2023.7.0         # Création TIFF multi-page pour batch Tesseract
                           # Gain estimé: +30-40% sur temps OCR

# ===================================================================
# OPTIONAL DEPENDENCIES - Outils supplémentaires
# ===================================================================

# Analyse de résultats interactifs (Analyse des résultats.py)
# Déjà couvert par: pandas, numpy, scipy, matplotlib, tkinter (built-in)

# Génération de graphiques d'appels (generate_callgraph.py)
# pycallgraph2>=1.1.3      # Décommentez si vous voulez générer des callgraphs
# graphviz>=0.20.1         # Décommentez si vous voulez générer des callgraphs
# Note: Graphviz doit aussi être installé sur le système

# ===================================================================
# VERSIONS TESTÉES (Configuration de référence)
# ===================================================================
# Python: 3.10+
# OpenCV: 4.8.0 (compilé avec CUDA 11.8 sur Ubuntu)
# numpy: 1.26.4
# pytesseract: 0.3.13
# pillow: 12.0.0
# optuna: 4.6.0
# scipy: 1.11.3
# pandas: 2.1.1
# matplotlib: 3.8.0
# seaborn: 0.12.0

# ===================================================================
# NOTES D'INSTALLATION
# ===================================================================

# UBUNTU 22.04 avec CUDA:
# 1. Installez les dépendances système d'abord
# 2. Compilez OpenCV 4.8.0 avec CUDA 11.8 (voir docs/installation/)
# 3. pip3 install --user -r requirements_ubuntu.txt
# 4. Vérifiez CUDA: python3 -c "import cv2; print(cv2.cuda.getCudaEnabledDeviceCount())"

# WINDOWS/MACOS:
# 1. Décommentez la ligne opencv-python ci-dessus
# 2. pip install -r requirements.txt
# 3. Installez Tesseract: https://github.com/UB-Mannheim/tesseract/wiki

# PROTECTION OpenCV CUDA (Ubuntu):
# Créez pip-constraints.txt pour bloquer opencv-python:
#   opencv-python==999.0.0
#   opencv-python-headless==999.0.0
#   opencv-contrib-python==999.0.0
# Puis: export PIP_CONSTRAINT=pip-constraints.txt
